@startuml

!theme mytheme

skinparam dpi 200

package "base" {

  class TBModel{
    'Attributes
    # int nOrb
    # int nDim
    # vector<Hop> hop
    # vector<OnSite> onSite
    'Methods
    + void setHop()
    + void setOnSite()
    + Hop getHop()
    + OnSite getOnSite()
  }

  class Hop{
    -complex<double> hop
    -int nOrb1
    -int nOrb2
    -int * n
    -int nDim
    + setHop()
  }

  class OnSite{
    -complex<double> en
    -int nOrb
    + setEn()
  }

  class OData{
    + void eBands2D(Hamiltonian &, ...)
    + void chargeDensity(Hamiltonian &, ...)
    + void wannierBands(Hamilonian &, ...)
  }

  abstract class Hamiltonian{
  +virtual cx_mat H(double * k = NULL) = 0
  +virtual sp_cx_mat spH(double * k = NULL) = 0
  - bool isSparse
}

class Wilson {
  + Wilson(Hamiltonian *)
  + cx_mat wilsonLoop()
  + cx_mat nestedWilsonLoop()
  + cx_mat nestedNestedWilsonLoop()
  + cx_mat wilsonLoopSupercell()
  + cx_mat nestedWilsonLoopSupercell()
  + cx_mat nestedNestedWilsonLoopSupercell()
}

class DOS #yellow{
}

class MultipoleOp #yellow{
}

class LocalizationStats #yellow{
}

class TBCleanH{
  + TBCleanH(TBModel)
  + void setSparse()
}

class TBDisorderedH #yellow{
  + TBDisorderedH(TBModel)
  + void setSparse()
}

class BoundaryGreenH #yellow{
  + BoundaryGreenH(Hamiltonian *, int dir)
}

Wilson o-- Hamiltonian
DOS o-- Hamiltonian
MultipoleOp o-- Hamiltonian
LocalizationStats o--Hamiltonian
OData o..Hamiltonian

Hamiltonian <|-- TBCleanH
Hamiltonian <|-- TBDisorderedH
Hamiltonian <|-- BoundaryGreenH

TBCleanH o-- TBModel
TBDisorderedH o-- TBModel

TBModel o-- OnSite
TBModel o-- Hop

legend center
    | Color | Type |
    |<#$BOXBG>| Done |
    |<#yellow>| TODO |
endlegend
}

@enduml
